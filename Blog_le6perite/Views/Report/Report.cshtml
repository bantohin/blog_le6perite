
@{
    ViewBag.Title = "Report";
}

<h2 style="text-align:center">Report a post</h2>

<form method="post" action="Report.cshtml" style="text-align: center">    
    <div>
        Your email address: <br/>
        <input type="text" name="customerEmail"  cols="45" />
    </div>

    <div>
        Details about your problem: <br />
        <textarea name="customerRequest" cols="45" rows="4"></textarea>
    </div>

    <br />

    <div>
        <input type="submit" value="Submit" />
    </div>
</form>

@{    
    var customerEmail = Request["customerEmail"];
    var customerRequest = Request["customerRequest"];
    var errorMessage = "Email not sent try filling the forms again with correct data";    
    try
    {
        // Initialize WebMail helper
        WebMail.SmtpServer = "Smtp.gmail.com";
        WebMail.SmtpPort = 25;
        WebMail.UserName = "your-user-name-here";
        WebMail.Password = "your-account-password";
        WebMail.From = "your-email-address-here";

        // Send email
        WebMail.Send(to: customerEmail,
            subject: "Negative content on Blog-le6perite",
            body: customerRequest
        );
    }
    catch (Exception ex)
    {
        errorMessage = ex.Message;
    }
}